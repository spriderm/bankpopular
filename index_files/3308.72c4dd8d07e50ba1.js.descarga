(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3308],{18446:function(e,n,t){var s=t(90939);e.exports=function(e,n){return s(e,n)}},56742:function(e,n,t){"use strict";t.d(n,{Z:function(){return r}});var s=t(85893);t(67294);var i=t(48683);function r(e){let{avoidElementName:n,avoidElementsClass:t,children:r,onClickOutside:l,...a}=e;return(0,s.jsx)(i.Z,{...a,onClickOutside:e=>{if(n){let t=document.getElementById(n);if(t&&t.contains(e.target))return}if(t){let n=document.getElementsByClassName(t);if(n?.length&&[...n].some(n=>n.contains(e.target)))return}return l?.(e)},children:r})}},85428:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var s=t(54673);async function i(){await (0,s.Z)({})}},53063:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var s={local:"http://webadmin.local:5140",dev:"https://webadmin.bejusto.com",prod:"https://webadmin.getjusto.com"}[(0,t(71053).Z)()];function i(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return`${s}/${e}/admin${n}`}},61832:function(e,n,t){"use strict";t.d(n,{Z:function(){return i}});var s=t(85893);function i(e){let{width:n=20,height:t=20,svgClass:i=null}=e;return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:n,height:t,viewBox:"0 0 30 22",fill:"currentColor",className:i,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.3098 21.3803C25.2138 21.3803 30 16.5942 30 10.6902C30 4.78615 25.2138 0 19.3098 0C13.4058 0 8.61963 4.78615 8.61963 10.6902C8.61963 16.5942 13.4058 21.3803 19.3098 21.3803ZM16.781 7.57122L19.3123 2.82918L21.8436 7.57122L27.033 8.56934L23.408 12.4982L24.0839 17.8571L19.3123 15.5433L14.5407 17.8571L15.2166 12.4982L11.5916 8.56934L16.781 7.57122Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M19.3125 2.8291L16.7812 7.57115L11.5918 8.56926L15.2168 12.4981L14.5408 17.857L19.3125 15.5432L24.0841 17.857L23.4081 12.4981L27.0331 8.56926L21.8437 7.57115L19.3125 2.8291Z",fill:"none"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.2397 0.0429048C11.9062 0.0145056 11.5684 0 11.227 0C5.0265 0 0 4.78615 0 10.6902C0 16.5942 5.0265 21.3803 11.227 21.3803C11.5218 21.3803 11.8139 21.3695 12.103 21.3483C8.38236 19.1502 5.90373 15.2191 5.90373 10.7354C5.90373 6.19702 8.4432 2.2248 12.2397 0.0429048Z",fill:"currentColor"})]})}},87442:function(e,n,t){"use strict";t.d(n,{I:function(){return j},Z:function(){return b}});var s=t(85893),i=t(52037),r=t(71666),l=t(52954),a=t(50361),c=t.n(a),o=t(41664),u=t.n(o),d=t(11163),m=t(67294),f=t(5434),h=t(40391),x=t(45272),p=t.n(x);function g(e){let{links:n,categories:t,cpg:a}=e,o=(0,d.useRouter)(),[x,g]=(0,m.useState)(!1),[j,b]=(0,m.useState)([]),[v,C]=(0,m.useState)({x:0,y:0,triangleX:0}),[y,k]=(0,m.useState)(!1),N=(0,r.ZP)(),{me:_}=(0,h.Z)(),L=_?._id,w=(0,m.useRef)(null),I=N<768,Z=null,M=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Z&&clearTimeout(Z),g(!0),n){let{x:n,y:t,width:s}=e.target.getBoundingClientRect(),i=(N-w.current.getBoundingClientRect().width)/2;C({x:i,y:t,triangleX:n-i+s/3})}},R=()=>{Z=setTimeout(()=>{g(!1)},500)},B=()=>{g(!1)},z=()=>{let e=[],n=c()(t);for(let t of(n.sort((e,n)=>e.parent&&n.parent?e.index-n.index:e.parent?1:n.parent?-1:e.index-n.index),n))if(t.parent){let n=e.find(e=>e._id===t.parent._id);n&&(n.subcategories=n.subcategories?[...n.subcategories,t]:[t])}else e.push(t);b(e)};if((0,m.useEffect)(()=>(z(),()=>{Z&&clearTimeout(Z)}),[]),!n||!n.length)return null;let T=L?n:n.filter(e=>!e.showLoggedIn);return(0,s.jsxs)("div",{className:p().container,style:{padding:a?"5px 0":"0 0 10px"},children:[T.map((e,n)=>{if(I&&e.showMegaMenu)return(0,s.jsx)("a",{className:p().link,rel:"noopener noreferrer",onClick:()=>k(!0),children:e.title},n);if(!e.path.startsWith("/"))return(0,s.jsx)("a",{href:e.path,target:"_blank",className:p().link,rel:"noopener noreferrer",children:e.title},n);let t=e.path===o.asPath;return(0,s.jsx)(m.Suspense,{fallback:null,children:(0,s.jsx)(u(),{href:I&&x?"/":e.path,passHref:!0,onClick:()=>{if(e.showMegaMenu&&I){k(!0);return}if(!t)return;let n=document.getElementsByClassName("mainNavbar")[0],s=n.clientHeight;(0,i.Z)({element:n,top:s})},suppressHydrationWarning:!0,className:t?p().active:p().link,onMouseOver:n=>{e.showMegaMenu&&!I?M(n,!0):g(!1)},onMouseOut:R,children:e.title})},n)}),(0,s.jsxs)("div",{ref:w,className:p().megamenu,onMouseOver:M,onMouseOut:R,style:{top:v.y+34,left:v.x,visibility:x?"visible":"hidden"},children:[j.map(e=>(0,s.jsxs)("div",{className:p().category,children:[(0,s.jsx)(u(),{href:`/pedir/category/${e._id}`,passHref:!0,prefetch:!1,className:p().categoryTitle,onClick:B,children:e.name}),e.subcategories?e.subcategories.map(e=>(0,s.jsx)(u(),{href:`/pedir/category/${e._id}`,prefetch:!1,passHref:!0,className:p().subcategoryTitle,onClick:B,children:e.name},e._id)):null,e.subcategories?(0,s.jsxs)(u(),{href:`/pedir/category/${e._id}`,passHref:!0,prefetch:!1,className:p().seeAll,onClick:B,children:["Ver todos",(0,s.jsx)(f.FNi,{size:10,color:"var(--primary-color)"})]}):null]},e._id)),(0,s.jsx)("div",{className:p().triangle,style:{top:-34,left:v.triangleX}})]}),y&&(0,s.jsx)(l.Z,{setOpen:k})]})}function j(){return(0,s.jsx)("div",{className:"h-[52px] w-full animate-pulse bg-gray-100 dark:bg-zinc-800"})}function b(e){return(0,s.jsx)(m.Suspense,{fallback:(0,s.jsx)(j,{}),children:(0,s.jsx)(g,{...e})})}},17033:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var s=t(85893),i=t(62691),r=t(30638),l=t(61832),a=t(41664),c=t.n(a);function o(e){let n=(0,r.Z)(),t=(0,i.Z)();if(!n)return null;let{loyaltyProgramConfig:a,me:o}=e;return a?.active&&(o?.websiteCoinsBalance||o?.websiteCoinsBalance===0)?(0,s.jsx)(c(),{href:"/justoloyalty",passHref:!0,legacyBehavior:!0,children:(0,s.jsxs)("div",{className:"flex px-2 py-1 space-x-1 items-center",children:[(0,s.jsx)(l.Z,{svgClass:t?"secondaryColor":"primaryColor"}),(0,s.jsx)("span",{children:o.websiteCoinsBalance})]})}):null}},97063:function(e,n,t){"use strict";t.d(n,{Z:function(){return B}});var s=t(85893),i=t(67294),r=t(5434),l=t(56742),a=t(74015),c=t(85428),o=t(23957),u=t(45544),d=t(59945),m=t(82740),f=t(41664),h=t.n(f),x=t(88768),p=t(35102),g=t(30638),j=t(96274),b=t.n(j);function v(e){let n=(0,g.Z)(),{t}=(0,x.$G)("website",{keyPrefix:"layout.layouts.default.navbar.menu.points"});if(n||!e?.config?.active)return null;let i=e.user.pointsInWebsite,r=e.config.name;return(0,s.jsx)(h(),{href:"/canjear",legacyBehavior:!0,children:(0,s.jsxs)("div",{className:b().button,children:[(0,s.jsx)("div",{className:b().title,children:t("labelAmountPoints",{points:(0,p.Z)(i,"0,0.[00]"),name:r})}),(0,s.jsx)("div",{className:b().description,children:t(i>=1e3?"labelRedeemForDiscountsCoupons":"labelPurchaseAccumulates",{name:r})})]})})}var C=t(53063),y=t(26730),k=t(75074),N=t.n(k);function _(){let{t:e}=(0,x.$G)("website",{keyPrefix:"layout.layouts.default.navbar.menu"}),n=(0,y.Z)();return(0,s.jsxs)(h(),{href:(0,C.Z)(n,""),passHref:!0,target:"_blank",className:N().menuLink,children:[(0,s.jsx)(r.Tif,{size:20}),(0,s.jsx)("span",{children:e("labelAdmin")})]})}var L=t(51494);function w(){let e=(0,L.l)("navbar");return(0,s.jsxs)("a",{onClick:()=>e(),className:N().menuText,children:["Iniciar sesi\xf3n ",(0,s.jsx)(r.HOZ,{})]})}var I=t(40391),Z=t(17033);let M="layout.layouts.default.navbar.menu",R=e=>{let{open:n,toggleOpen:t,pointsConfiguration:a,buttonColor:f,onlyOptions:p}=e,{t:g}=(0,x.$G)("website"),[j,b]=(0,i.useState)(n),C=(0,d.Z)(),{me:y,loyaltyProgramConfig:k}=(0,I.Z)(),{website:L}=(0,m.Z)(),R=e=>{let n=(0,u.z)("openByWebview");return n&&e?.loginWithExternalProvidersAvailable?.includes(n)};(0,i.useEffect)(()=>{b(n)},[n]);let B=()=>{b(!j),t&&t()},z=async()=>{await (0,c.Z)()},T=()=>!function(e){if(!e)return!1;let{roles:n,roleInWebsite:t}=e;return!!n&&!!n.length||!!t&&["admin","marketing","content","storeAdmin"].includes(t.role)}(y)?null:(0,s.jsx)(_,{}),$=()=>!function(e){if(!e)return!1;let{roles:n,roleInWebsite:t}=e;return!!n&&!!n.length||!!t&&["admin","operator","storeAdmin"].includes(t.role)}(y)?null:(0,s.jsxs)("a",{href:"https://pos.getjusto.com",target:"blank",className:N().menuLink,children:[(0,s.jsx)(r.moe,{size:20}),(0,s.jsx)("span",{children:g(`${M}.labelPointOfSale`)})]}),W=()=>{if(!y||!j)return null;let e=R(L),n=e?"#":"/settings";return(0,s.jsxs)("div",{className:N().menu,children:[(0,s.jsxs)(h(),{href:n,passHref:!0,className:N().account,children:[(0,s.jsx)("div",{className:N().name,children:"Sin nombre"===y.name?"Mi cuenta":y.name}),(0,s.jsx)("div",{className:N().email,children:y.hiddenEmail})]}),(0,s.jsx)(v,{user:y,config:a}),(0,s.jsxs)(h(),{href:"/checkout",className:N().menuLink,children:[(0,s.jsx)(r.kcE,{size:20}),(0,s.jsx)("span",{children:g("fields.myCart",{ns:"generic"})})]}),(0,s.jsxs)(h(),{href:"/pedidos",className:N().menuLink,children:[(0,s.jsx)(r.PmM,{size:20}),(0,s.jsx)("span",{children:g("fields.myOrders",{ns:"generic"})})]}),e?null:(0,s.jsxs)(h(),{href:n,className:N().menuLink,target:"_blank",rel:"noopener noreferrer",children:[(0,s.jsx)(r.b9P,{size:20}),(0,s.jsx)("span",{children:g(`${M}.labelMyAccount`)})]}),T(),$(),e?null:(0,s.jsx)("div",{className:N().logoutIcons,children:(0,s.jsxs)("a",{onClick:z,className:N().menuLink,children:[(0,s.jsx)(r.IUz,{size:20}),(0,s.jsx)("div",{children:g(`${M}.labelLogOut`)})]})})]},"menu")};return p?W():R(L)&&!C?null:(0,s.jsx)(l.Z,{onClickOutside:j?B:()=>null,children:(0,s.jsxs)("div",{className:N().container,style:{background:`${f}`,color:(0,o.Z)(f||"#111")},children:[y?(0,s.jsxs)("div",{className:"flex divide-x",children:[(0,s.jsxs)("div",{className:N().menuText,onClick:B,children:["Sin nombre"===y.name?g(`${M}.labelMyAccount`):y.name," ",(0,s.jsx)(r.Ix0,{})]}),(0,s.jsx)(Z.Z,{loyaltyProgramConfig:k,me:y})]}):C?(0,s.jsx)("div",{className:N().menuText,children:g(`${M}.labelLoading`)}):(0,s.jsx)(w,{}),W()]})})};function B(e){let[n,t]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{t(!0)},[]),n)?(0,s.jsx)(a.Z,{fallback:null,children:(0,s.jsx)(R,{...e})}):null}},40391:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var s=t(26730),i=t(65379),r=t(31230);function l(){let e=(0,s.Z)(),{data:n}=(0,i.Zu)({query:r.default`
      query getMeInNavbar($websiteId: ID) {
        me {
          _id
          name
          email
          roles
          roleInWebsite(websiteId: $websiteId) {
            _id
            role
          }
          hiddenEmail
          pointsInWebsite(websiteId: $websiteId)
          websiteCoinsBalance(websiteId: $websiteId)
        }
        loyaltyProgramConfig(websiteId: $websiteId) {
          _id
          name
          active
          maxRedeemAmount
        }
      }
    `,variables:{websiteId:e}});return n}},52954:function(e,n,t){"use strict";t.d(n,{Z:function(){return v}});var s=t(85893),i=t(67294),r=t(5434),l=t(73964),a=t(26730),c=t(65379),o=t(31230),u=t(18446),d=t.n(u),m=t(11163),f=t(88768),h=t(56915),x=t.n(h),p=t(86694),g=t.n(p);let j={...x(),...g()},b=o.default`
  query getCategoriesForMenu($websiteId: ID) {
    categories(websiteId: $websiteId) {
      items {
        _id
        name
        subCategories {
          items {
            _id
            name
          }
        }
      }
    }
  }
`;function v(e){let{setOpen:n}=e,t=(0,a.Z)(),o=(0,m.useRouter)(),[u,h]=(0,i.useState)(),[x,p]=(0,i.useState)(!1),{t:g}=(0,f.$G)(),v="generic:fields",{categories:C,loading:y}=(0,c.Zu)({query:b,variables:{websiteId:t},fetchPolicy:"cache-first"});return((0,i.useEffect)(()=>{if((null!==u||!x)&&o.asPath?.includes("/pedir/category/")){let e=o.asPath?.split("/")?.pop(),n=C.items.find(n=>n._id===e);(!d()(n,u)||x)&&(h(n),p(!1))}},[o,C.items,x,u]),y||!C)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:j.closeMenu,onClick:()=>n(!1),children:g(`${v}.close`)}),(0,s.jsx)("div",{className:j.loadingContainer,children:(0,s.jsx)(l.Z,{})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:j.closeMenu,onClick:()=>n(!1),children:g(`${v}.close`)}),(0,s.jsx)("div",{className:j.container,children:(0,s.jsxs)("div",{className:j.categories,children:[(0,s.jsxs)("div",{className:j.header,children:[u?(0,s.jsx)("span",{className:j.textWithIcon,onClick:()=>{h(null),p(!0)},children:(0,s.jsx)(r.sG8,{size:"22"})}):null,(0,s.jsx)("h2",{children:u?(0,s.jsx)("span",{className:j.primaryColor,onClick:()=>{n(!1),o.push(`/pedir/category/${u._id}`)},children:u.name}):g("website:order.labelCategories")})]}),(0,s.jsx)("div",{className:j.categoriesList,children:(u?u.subCategories:C).items.map((e,t)=>(0,s.jsx)("div",{className:j.categoryItem,onClick:()=>{n(!1),o.push(`/pedir/category/${e._id}`),h(e)},children:e.name},t))})]})})]})}},45272:function(e){e.exports={container:"Bhhe5k9a_WLWLClklHD0I navbarLinksContainer",link:"_29RJklgC4kkTuDEjlOL0vL navbarLink appSubtitle",active:"BELM7cMsLwitWOnC5Cfn_ _29RJklgC4kkTuDEjlOL0vL navbarLink appSubtitle primaryColor",megamenu:"SCb_lPI4rQjnCY6wHU4UV",category:"_1fzOLdBax7bU6GI30z36Yh",categoryTitle:"_1jn8AhOjSPwFIPvbXE7fLe",subcategoryTitle:"_3C3QuVtyaKRxGmz2b2Do7H",seeAll:"x92lcwfCKfD5E6YzFCnaM",triangle:"iKj56B1nmRbQyMvLqOQm5"}},96274:function(e){e.exports={button:"_3npmkdebVjKSwYjMcWL0iD primaryBackgroundColor buttonShadow",title:"_1-86oDbUcpPGGxItQkpS-j"}},75074:function(e){e.exports={container:"_1h-aTgBjS9DnZxzvM-1N7w buttonShadow",icon:"m_RU5JotN4Jf9e-3gF3k",menuText:"_1uEIw5iXXaEhyWSG8QUUYB",menu:"lNxYI4NR0QXxUWpnkyzxG",account:"_2zN3KfL4DCAbiftdxv0WNT",name:"_36ixizDnhORbr-aHEfUQ7P",email:"_3xWt_t5piTol1xnIjIvXcI",menuLink:"_3jzCLpKIXuvIoz3TbBYXlh",divider:"Wrt-TFXAQAWTuMepYhXAC",logoutIcons:"_151yV5--gPTRNYM2th9W0c","user-menu-enter":"HxETBatahehao0Y8Bt6bB","user-menu-leave":"vQTRR_0XKJ20XD7Qmvvil","user-menu-leave-active":"_2jW3MvouCN3e8b65lNYhc","user-menu-enter-active":"_3eVYUg38RO2e4sWayZwayu"}},56915:function(e){e.exports={forceColor:"_1FzGGrusCYvYM-XueTBsvV",textWithIcon:"_3RcLU2MDzPtl_RR3SB2g47",containerFilter:"_1XFUzAhca6UjQUXXl4C2bR",spaceLeft:"_8J5l1mYim_zM0CNKAr823"}},86694:function(e){e.exports={closeMenu:"WWe4KToHi9GTHFilq-GsV backgroundBorderColor",container:"_3Ig1X2CpRdxln0tBfFuzs8",loadingContainer:"wRPw54j3maLrgH2qY5FNO _3Ig1X2CpRdxln0tBfFuzs8",categories:"_3gONsDeMv_nq-sU7Li3y7a",categoriesList:"_2UXV5eFFzhuUB_yAI_P6W7",categoryItem:"_3uZcKFmu1Q7TOMGRVzXrJp",header:"qIhDQetEVCYUMdj4bdCN3",primaryColor:"_37MkYbCMjWTk8635JHCKR6"}}}]);
//# sourceMappingURL=3308.72c4dd8d07e50ba1.js.map